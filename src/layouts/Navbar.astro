---
import Container from "../components/shared/Container.astro";
import Navitem from "../components/shared/Navitem.astro";
import BtnLink from "../components/shared/BtnLink.astro";
import BtnThemeSwitch from "../components/shared/BtnThemeSwitch.astro";

const navItems = [
  {
    href: "#",
    text: "Inicio",
  },
  // {
  //   href: "#hero",
  //   text: "Hero",
  // },
  {
    href: "#services",
    text: "Servicios",
  },
  {
    href: "#innovations",
    text: "Innovaciones",
  },
  {
    href: "#testimonials",
    text: "Testimonios",
  },
  {
    href: "#environment",
    text: "Medio Ambiente",
  },
  {
    href: "#projects",
    text: "Proyectos",
  },
];
---

<header class="fixed inset-x-0 top-0 z-50 backdrop-blur-md bg-white/80 dark:bg-base-dark-900 shadow-sm transition-all duration-300" id="navbar">
  <Container>
    <nav class="w-full flex justify-between items-center py-6 transition-all duration-300" id="nav-content">
      <!-- Logo -->
      <div class="min-w-max inline-flex relative group">
        <a href="/energy-template" class="relative flex items-center gap-3 transition-transform duration-300 hover:scale-105">
          <div class="relative h-14 overflow-hidden flex items-center gap-4">
            <span class="text-4xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent dark">MGarden</span>
            <svg class="h-12 w-12 fill-primary absolute bottom-4 left-16 transition-transform duration-300 group-hover:rotate-12" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
              <g transform="translate(0.000000,1024.000000) scale(0.100000,-0.100000)">
                <path d="M9240 7898 c-34 -43 -184 -140 -315 -203 -260 -126 -470 -176 -1047 -250 -556 -71 -778 -127 -1048 -266 -157 -81 -285 -174 -410 -299 -213 -213 -361 -481 -425 -771 -22 -101 -31 -335 -16 -440 15 -106 49 -235 66 -249 9 -7 22 4 50 47 123 187 247 336 444 534 113 113 252 242 308 287 278 219 577 378 1188 630 160 66 334 140 388 166 54 25 95 41 92 35 -14 -22 -231 -141 -512 -279 -166 -82 -353 -176 -415 -211 -585 -321 -993 -653 -1295 -1054 -52 -70 -419 -632 -451 -692 -8 -15 -9 -24 -2 -28 13 -8 21 -3 138 97 165 139 298 216 458 264 86 26 101 27 439 35 518 13 649 28 890 106 806 259 1340 1015 1494 2114 33 237 40 461 13 458 -4 0 -18 -14 -32 -31z"/>
              </g>
            </svg>
          </div>
        </a>
      </div>

      <!-- Mobile Menu Overlay -->
      <div
        data-nav-overlay
        aria-hidden="true"
        class="fixed hidden inset-0 lg:!hidden  backdrop-blur-sm transition-opacity duration-300"
      >
      </div>

      <!-- Navigation Links -->
      <div
        data-navbar
        class="flex h-0 overflow-hidden lg:!h-auto lg:scale-y-100 duration-300 ease-in-out flex-col gap-y-6 gap-x-4 lg:flex-row w-full lg:justify-between lg:items-center absolute lg:relative top-full lg:top-0 bg-white lg:bg-transparent border-x border-gray-200 dark:border-gray-700 lg:border-x-0"
      >
        <ul
          class="border-t border-gray-200 dark:border-gray-700 lg:border-t-0 px-6 lg:px-0 pt-6 lg:pt-0 flex flex-col lg:flex-row gap-y-4 gap-x-6 text-lg text-gray-700 dark:text-gray-200 w-full lg:justify-end lg:items-center"
        >
          {
            navItems.map((item) => {
              return <Navitem {...item} />;
            })
          }
        </ul>

        <div
          class="lg:min-w-max flex items-center sm:w-max w-full pb-6 lg:pb-0 border-b border-gray-200 dark:border-gray-700 lg:border-0 px-6 lg:px-0 lg:ml-12"
        >
          <BtnLink
            text="Contacto"
            href="#cta"
            className="flex justify-center w-full sm:w-max text-lg font-medium text-heading-2"
            variant="cta"
            isNavbar={true}
          />
        </div>
      </div>

      <!-- Theme Switch and Mobile Menu Button -->
      <div class="min-w-max flex items-center gap-x-4 lg:ml-8">
        <BtnThemeSwitch variant="primary" />

        <button
          data-toggle-nav
          data-open-nav="false"
          class="lg:hidden lg:invisible outline-none w-7 h-auto flex flex-col relative group"
        >
          <span
            id="line1"
            class="w-6 h-0.5 rounded-full bg-gray-700 dark:bg-gray-200 transition-all duration-300 ease-linear group-hover:bg-primary dark:group-hover:bg-primary"
          ></span>
          <span
            id="line2"
            class="w-6 origin-center mt-1.5 h-0.5 rounded-full bg-gray-700 dark:bg-gray-200 transition-all duration-300 ease-linear group-hover:bg-primary dark:group-hover:bg-primary"
          ></span>
          <span
            id="line3"
            class="w-6 mt-1.5 h-0.5 rounded-full bg-gray-700 dark:bg-gray-200 transition-all duration-300 ease-linear group-hover:bg-primary dark:group-hover:bg-primary"
          ></span>
          <span class="sr-only">Alternar menú de navegación</span>
        </button>
      </div>
    </nav>
  </Container>
</header>

<script>
  // Script para manejar el cambio de tamaño del navbar al hacer scroll
  const navbar = document.getElementById('navbar');
  const navContent = document.getElementById('nav-content');
  let lastScroll = 0;

  if (navbar && navContent) {
    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;

      if (currentScroll <= 0) {
        // En la parte superior
        navbar.classList.remove('shadow-md');
        navContent.classList.remove('py-2');
        navContent.classList.add('py-6');
      } else {
        // Al hacer scroll
        navbar.classList.add('shadow-md');
        navContent.classList.remove('py-6');
        navContent.classList.add('py-2');
      }

      lastScroll = currentScroll;
    });
  }
</script>
